<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<!-- Header -->
<header class="bg-white shadow-md" th:fragment="header">
    <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
        <!-- Main logo/link -->
        <a th:href="@{/books}" class="text-2xl font-bold text-gray-800" th:text="#{nav.brand}">BookStore</a>

        <!-- Navigation Links -->
        <div class="flex items-center space-x-4">
            <!-- Language Switcher -->
            <div class="border-r pr-4 mr-4 border-gray-300">
                <div th:replace="~{fragments/language :: switcher}"></div>
            </div>

            <!-- All Authenticated Users -->
            <a sec:authorize="isAuthenticated()" th:href="@{/books}" class="px-2 py-2 text-gray-700 hover:text-blue-600 font-medium" th:text="#{nav.books}">Books</a>

            <!-- Employees Only -->
            <a sec:authorize="hasRole('EMPLOYEE')" th:href="@{/clients}" class="px-2 py-2 text-gray-700 hover:text-blue-600 font-medium" th:text="#{nav.clients}">Clients</a>
            <a sec:authorize="hasRole('EMPLOYEE')" th:href="@{/orders}" class="px-2 py-2 text-gray-700 hover:text-blue-600 font-medium" th:text="#{nav.all_orders}">All Orders</a>

            <!-- My Orders (Dynamic link for current user) -->
            <a sec:authorize="isAuthenticated()"
               th:href="@{/orders/{email}(email=${#authentication.name})}"
               class="px-2 py-2 text-gray-700 hover:text-blue-600 font-medium" th:text="#{nav.my_orders}">
                My Orders
            </a>

            <!-- Employees Only: Add Book Button -->
            <a sec:authorize="hasRole('EMPLOYEE')" th:href="@{/books/new}" class="ml-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 text-sm" th:text="#{nav.add_book}">
                + Add New Book
            </a>

            <!-- Clients Only -->
            <a sec:authorize="hasRole('CLIENT')" th:href="@{/cart}" class="px-2 py-2 text-gray-700 hover:text-blue-600 font-medium" th:text="#{nav.cart}">Cart</a>

            <a sec:authorize="isAuthenticated()" th:href="@{/profile}" class="px-2 py-2 text-gray-700 hover:text-blue-600 font-medium" th:text="#{nav.profile}">My Profile</a>

            <!-- Login / Logout Buttons -->
            <form th:action="@{/logout}" method="post" class="inline" sec:authorize="isAuthenticated()">
                <button type="submit" class="ml-2 px-4 py-2 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 text-sm" th:text="#{nav.logout}">
                    Logout
                </button>
            </form>

            <a sec:authorize="!isAuthenticated()" th:href="@{/login}" class="ml-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 text-sm" th:text="#{nav.login}">
                Login
            </a>
        </div>
    </nav>
</header>
</body>
</html>
